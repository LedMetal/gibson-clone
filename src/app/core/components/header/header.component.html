<div class="header">
  <div class="top-bar">
    <div class="top-bar-content">
      <div class="links-container">
        <div class="link-container">
          <a
            class="link"
            href="https://www.gibson.com/en-US/garage"
            target="_blank"
            >GIBSON GARAGE</a
          >
        </div>
        <div class="link-container">
          <a
            class="link"
            href="https://www.gibson.com/en-US/Find-A-Store"
            target="_blank"
            >FIND A DEALER</a
          >
        </div>
        <div class="link-container">
          <a
            class="link"
            href="https://www.gibson.com/en-US/gibson-app"
            target="_blank"
            >GIBSON APP</a
          >
        </div>
      </div>

      <div class="language-select-container">
        <button
          mat-button
          class="language-select-btn"
          [matMenuTriggerFor]="languageMenu"
        >
          <div class="language-select-btn-content">
            <img
              class="language-flag"
              src="/assets/images/flags/usa-flag.svg"
            />
            <span class="language-title">UNITED STATES</span>
            <fa-icon [icon]="faChevronDown"></fa-icon>
          </div>
        </button>

        <mat-menu
          class="language-select-menu"
          #languageMenu="matMenu"
          yPosition="below"
        >
          <ng-template matMenuContent>
            @for (language of languageOptions; track $index) {
            <button mat-menu-item class="menu-option">
              <div class="menu-option-content">
                <img
                  class="language-flag"
                  [src]="'/assets/images/flags/' + language.image"
                />
                <div class="language-title">
                  {{ language.title | uppercase }}
                </div>
              </div>
            </button>
            }
          </ng-template>
        </mat-menu>
      </div>
    </div>
  </div>

  <div class="nav-bar">
    <div class="nav-bar-content">
      <div class="left-section">
        <div class="home-link-container">
          <a class="home-link" [routerLink]="['/']">
            <img src="/assets/images/logos/gibson-header-logo.svg" />
          </a>
        </div>

        <div class="nav-menu-section">
          @for (navItem of navConfig; track $index) {
          <div class="nav-link">
            <button
              class="nav-link-trigger"
              mat-button
              #menuTrigger="matMenuTrigger"
              [matMenuTriggerFor]="navItemMenu"
              (mouseenter)="toggleMenu(menuTrigger)"
            >
              {{ navItem.navTitle }}
            </button>

            <mat-menu
              [class]="
                'nav-item-menu ' +
                navItem.additionalClassNames?.toString()?.split(',')?.join(' ')
              "
              #navItemMenu="matMenu"
              xPosition="after"
              yPosition="below"
            >
              <ng-template matMenuContent>
                <div
                  class="menu-items-list-container"
                  *ngFor="let menuItemsList of navItem.menuItemsLists"
                >
                  <div class="list-title">{{ menuItemsList.listTitle }}</div>

                  <div class="menu-items-list">
                    <div
                      class="menu-item"
                      *ngFor="let menuItem of menuItemsList.menuItems"
                    >
                      <a
                        *ngIf="menuItem.itemLink; else withSubMenu"
                        class="menu-item-link"
                        [href]="menuItem.itemLink"
                        mat-menu-item
                        >{{ menuItem.itemTitle }}</a
                      >

                      <ng-template #withSubMenu>
                        <button
                          class="menu-item-btn"
                          [ngClass]="{
                            'sub-menu-trigger':
                              menuItem.subMenuType === SubMenuType.subMenu
                          }"
                          mat-menu-item
                          [matMenuTriggerFor]="subMenu"
                        >
                          {{ menuItem.itemTitle }}
                        </button>

                        <mat-menu
                          class="sub-menu"
                          [class]="navItem.navTitle | lowercase"
                          #subMenu="matMenu"
                        >
                          <ng-template matMenuContent>
                            <div class="sub-menu-items-container">
                              <div class="list-title">
                                {{ menuItem.itemTitle | uppercase }}
                              </div>

                              <div class="sub-menu-items-list">
                                <div
                                  class="sub-menu-item"
                                  *ngFor="
                                    let subMenuItem of menuItem.subMenuItems
                                  "
                                >
                                  <a
                                    *ngIf="
                                      subMenuItem.itemLink;
                                      else withSubMenu
                                    "
                                    class="sub-menu-item-link"
                                    [ngClass]="subMenuItem.additionalClassNames"
                                    [href]="subMenuItem.itemLink"
                                    mat-menu-item
                                    >{{ subMenuItem.itemTitle }}</a
                                  >

                                  <ng-template #withSubMenu>
                                    <button
                                      class="sub-menu-item-btn"
                                      mat-menu-item
                                    >
                                      {{ subMenuItem.itemTitle }}
                                    </button>
                                  </ng-template>
                                </div>
                              </div>
                            </div>
                          </ng-template>
                        </mat-menu>
                      </ng-template>
                    </div>
                  </div>
                </div>
              </ng-template>
            </mat-menu>
          </div>
          }
        </div>
      </div>

      <div class="right-section">
        <div class="cart-container">
          <a class="cart-link" [routerLink]="['/']"
            ><fa-icon
              class="cart-icon"
              [icon]="faCartShopping"
              size="xl"
            ></fa-icon
          ></a>
        </div>
      </div>
    </div>
  </div>
</div>
